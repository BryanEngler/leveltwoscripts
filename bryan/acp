#auto cherry pick commits
#usage acp [REGEX IN COMMIT MESSAGE TO MATCH] [BRANCH] {limit} - acp LPS-12345 ee-6.1.x 3

tempacp="C:/Users/liferay/Desktop/Bryan/commands/tmp/tempacpfile.txt"

if [ $# -eq 2 ]
	then
		git log --pretty=format:"%h" --grep="$1" $2 | 
		tac > $tempacp
		trimblank $tempacp
		cat $tempacp | 
		
		while read ID
			do
				echo
				git cherry-pick $ID

				if [ $? != 0 ]
					then 
						echo
						echo Cherry Pick FAILED
						exit
				fi
			done

		rm $tempacp
	
	else
		git log --pretty=format:"%h" --grep="$1" $2 | 
		head -$3 | 
		tac > $tempacp
		trimblank $tempacp
		cat $tempacp |

		while read ID
			do
				echo
				git cherry-pick $ID
				
				if [ $? != 0 ]
					then 
						echo
						echo Cherry Pick FAILED
						exit
				fi
			done

		rm $tempacp
fi